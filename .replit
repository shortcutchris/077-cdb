# Replit Configuration for SpecifAI Monorepo

hidden = [".git", "node_modules", ".env", ".env.local", ".cache", "dist", ".vite", "pnpm-lock.yaml"]

# Development run command
run = """
  npm install -g pnpm
  pnpm install
  cd packages/web
  pnpm run build
  pnpm run preview -- --host 0.0.0.0 --port 3000
"""

# Production deployment configuration
[deployment]
build = ["sh", "-c", "npm install -g pnpm && pnpm install && cd packages/web && pnpm run build"]
run = ["sh", "-c", "cd packages/web && pnpm run preview --host 0.0.0.0 --port 3000"]
deploymentTarget = "cloudrun"
ignorePaths = ["node_modules", ".git", "*.md"]

[nix]
channel = "stable-24_11"

[env]
NODE_ENV = "production"
SKIP_HUSKY = "true"
HUSKY = "0"
REPLIT_DISABLE_PACKAGE_LAYER = "1"
NPM_CONFIG_PRODUCTION = "false"

[[ports]]
localPort = 3000
externalPort = 80

[[ports]]
localPort = 5174
externalPort = 3000

[packager]
language = "nodejs-npm"

[packager.features]
packageSearch = true
guessImports = true
enabledForHosting = false